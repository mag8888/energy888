<!DOCTYPE html>
<html>
<head>
    <title>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL —Å–µ—Ä–≤–µ—Ä–∞</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: 50px auto; 
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            opacity: 0.8;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }
        .error {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff0000;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL —Å–µ—Ä–≤–µ—Ä–∞</h1>
        
        <div class="error">
            <h3>‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!</h3>
            <p>–°–µ—Ä–≤–µ—Ä <code>energy888-advanced-socket.onrender.com</code> –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.</p>
            <p>–ù—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å–µ—Ä–≤–µ—Ä Railway.</p>
        </div>
        
        <div class="status" id="status">
            <div>–¢–µ–∫—É—â–∏–π Socket URL: <span id="currentUrl">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
            <div>–°—Ç–∞—Ç—É—Å: <span id="connectionStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
        </div>
        
        <button onclick="fixServerUrl()">üîß –ò—Å–ø—Ä–∞–≤–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞</button>
        <button onclick="testConnection()">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
        <button onclick="goToGame()">üéÆ –ü–µ—Ä–µ–π—Ç–∏ –∫ –∏–≥—Ä–µ</button>
        
        <div id="logs" style="margin-top: 20px; text-align: left; font-size: 14px;"></div>
    </div>

    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
    <script>
        function log(message) {
            console.log(message);
            const logs = document.getElementById('logs');
            logs.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }
        
        function updateStatus() {
            const currentUrl = localStorage.getItem('SOCKET_URL') || '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
            document.getElementById('currentUrl').textContent = currentUrl;
            
            if (currentUrl.includes('energy888-advanced-socket.onrender.com')) {
                document.getElementById('connectionStatus').textContent = '‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)';
                document.getElementById('connectionStatus').style.color = '#ff6b6b';
            } else if (currentUrl.includes('money8888-production.up.railway.app')) {
                document.getElementById('connectionStatus').textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (Railway)';
                document.getElementById('connectionStatus').style.color = '#4CAF50';
            } else {
                document.getElementById('connectionStatus').textContent = '‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä';
                document.getElementById('connectionStatus').style.color = '#ffa500';
            }
        }
        
        function fixServerUrl() {
            log('üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º URL —Å–µ—Ä–≤–µ—Ä–∞...');
            
            // –û—á–∏—â–∞–µ–º localStorage
            localStorage.clear();
            log('‚úÖ –û—á–∏—â–µ–Ω localStorage');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL Railway
            localStorage.setItem('SOCKET_URL', 'https://money8888-production.up.railway.app');
            log('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL: ' + localStorage.getItem('SOCKET_URL'));
            
            updateStatus();
            
            setTimeout(() => {
                log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É...');
                window.location.reload();
            }, 2000);
        }
        
        function testConnection() {
            log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway —Å–µ—Ä–≤–µ—Ä—É...');
            
            const server = 'https://money8888-production.up.railway.app';
            const socket = io(server, {
                transports: ['websocket', 'polling'],
                timeout: 10000
            });
            
            socket.on('connect', () => {
                log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway —É—Å–ø–µ—à–Ω–æ! ID: ' + socket.id);
                socket.disconnect();
            });
            
            socket.on('connect_error', (error) => {
                log('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Railway: ' + error.message);
            });
            
            socket.on('disconnect', () => {
                log('üîå –û—Ç–∫–ª—é—á–∏–ª–∏—Å—å –æ—Ç Railway —Å–µ—Ä–≤–µ—Ä–∞');
            });
        }
        
        function goToGame() {
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            const gameUrl = 'https://money8888-production.up.railway.app/simple-rooms/';
            const url = new URL(gameUrl);
            url.searchParams.set('t', Date.now().toString());
            url.searchParams.set('socket', 'https://money8888-production.up.railway.app');
            
            window.open(url.toString(), '_blank');
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateStatus();
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º, –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
        if (localStorage.getItem('SOCKET_URL') && localStorage.getItem('SOCKET_URL').includes('energy888-advanced-socket.onrender.com')) {
            log('‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –ø—Ä–∏–º–µ–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...');
            setTimeout(fixServerUrl, 1000);
        }
    </script>
</body>
</html>

