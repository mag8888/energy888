(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{5127:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/room/setup",function(){return o(1508)}])},1508:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return p}});var t=o(5893),n=o(1163),i=o(7294),d=o(7642),l=o(4319);let a=["Врач","Учитель","Инженер","Программист","Дизайнер","Менеджер","Юрист","Бухгалтер","Повар","Архитектор","Психолог","Журналист","Фотограф","Музыкант","Художник"],s=["Путешествовать по миру","Купить дом","Начать свой бизнес","Выучить новый язык","Написать книгу","Создать семью","Стать знаменитым","Помогать другим","Изучить космос","Жить у моря","Играть на сцене","Создать шедевр","Покорить горы","Изучить историю","Создать изобретение"];function p(){let e=(0,n.useRouter)(),{id:r}=e.query,[o,p]=(0,i.useState)(null),[x,c]=(0,i.useState)(null),[g,u]=(0,i.useState)(""),[b,h]=(0,i.useState)(""),[m,f]=(0,i.useState)(!0),[y,k]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(!r)return;if(!localStorage.getItem("user")){e.push("/simple-auth");return}let o="http://localhost:4000";console.log("\uD83D\uDD0C Подключаемся к Socket.IO:",o);let t=(0,d.io)(o,{transports:["websocket","polling"],timeout:2e4,forceNew:!0});return t.on("connect",()=>{console.log("\uD83D\uDD0C Socket connected:",t.connected),p(t),t.emit("join-room",{roomId:r})}),t.on("room-joined",e=>{console.log("\uD83D\uDCCB Получена информация о комнате:",e),c(e),f(!1)}),t.on("room-updated",e=>{console.log("\uD83D\uDCCB Комната обновлена:",e),c(e)}),t.on("error",e=>{console.error("❌ Socket error:",e),k(e),f(!1)}),t.on("disconnect",()=>{console.log("\uD83D\uDD0C Socket disconnected"),p(null)}),()=>{t.disconnect()}},[r,e]);let j=e=>{u(e)},S=e=>{h(e)},w=()=>{o&&o.emit("leave-room",{roomId:r}),e.push("/simple-rooms")};return m?(0,t.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif"},children:(0,t.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"20px",padding:"40px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:"2px solid rgba(255, 255, 255, 0.3)",textAlign:"center"},children:(0,t.jsx)("div",{style:{color:"white",fontSize:"1.5rem",marginBottom:"20px"},children:"\uD83D\uDD0C Подключение к комнате..."})})}):y||!x?(0,t.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif"},children:(0,t.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"20px",padding:"40px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:"2px solid rgba(255, 107, 107, 0.5)",textAlign:"center",maxWidth:"500px"},children:[(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"1.5rem",marginBottom:"20px"},children:"❌ Ошибка подключения"}),(0,t.jsx)("button",{onClick:w,style:{background:"linear-gradient(45deg, #ff6b6b, #ee5a24)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",cursor:"pointer",fontWeight:"bold",fontSize:"16px",boxShadow:"0 4px 15px rgba(255, 107, 107, 0.4)",transition:"all 0.3s ease"},children:"Вернуться в лобби"})]})}):(0,t.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",padding:"20px",fontFamily:"Arial, sans-serif"},children:[(0,t.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"15px",padding:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{color:"white",margin:0,fontSize:"2rem",fontWeight:"bold"},children:"Настройка персонажа"}),(0,t.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",marginTop:"5px"},children:["Комната: ",x.name," | Игроков: ",x.currentPlayers,"/",x.maxPlayers]})]}),(0,t.jsx)("button",{onClick:w,style:{background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid rgba(255, 255, 255, 0.5)",borderRadius:"8px",padding:"12px 24px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Покинуть комнату"})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginBottom:"30px"},children:[(0,t.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"15px",padding:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[(0,t.jsx)("h2",{style:{color:"white",margin:"0 0 20px 0",fontSize:"1.5rem",textAlign:"center"},children:"Выберите профессию"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px"},children:a.map(e=>(0,t.jsx)("button",{onClick:()=>j(e),style:{background:g===e?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.1)",color:"white",border:g===e?"2px solid #4CAF50":"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px 8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",textAlign:"center"},children:e},e))})]}),(0,t.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"15px",padding:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[(0,t.jsx)("h2",{style:{color:"white",margin:"0 0 20px 0",fontSize:"1.5rem",textAlign:"center"},children:"Выберите мечту"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:s.map(e=>(0,t.jsx)("button",{onClick:()=>S(e),style:{background:b===e?"linear-gradient(45deg, #2196F3, #1976D2)":"rgba(255, 255, 255, 0.1)",color:"white",border:b===e?"2px solid #2196F3":"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",textAlign:"left"},children:e},e))})]})]}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)("button",{onClick:()=>{o&&x&&g&&b&&(o.emit("player-setup",{roomId:r,profession:g,dream:b}),e.push("/room/".concat(r)))},disabled:!g||!b,style:{background:g&&b?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.2)",color:"white",border:"none",borderRadius:"8px",padding:"15px 30px",cursor:g&&b?"pointer":"not-allowed",fontWeight:"bold",fontSize:"18px",boxShadow:g&&b?"0 4px 15px rgba(76, 175, 80, 0.4)":"none",transition:"all 0.3s ease",opacity:g&&b?1:.5},children:g&&b?"Начать игру!":"Выберите профессию и мечту"})})]}),(0,t.jsx)(l.Z,{currentRoomId:r})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5127)}),_N_E=e.O()}]);