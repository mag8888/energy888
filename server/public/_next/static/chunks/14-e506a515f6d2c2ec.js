"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{6014:function(e,o,t){t.d(o,{Z:function(){return K}});var n=t(5893),i=t(645),r=t.n(i),a=t(7294),s=t(533),l=t(8003),c=t(8738),d=t(4653),u=t(447),x=t(3742),p=t(1093),g=t(8466),m=t(9366),b=t(251),h=t(3553),f=t(3239),y=t(6431),j=t(1449),D=t(6809),v=t(3559),C=t(7620),F=t(4572),k=t(3010),w=t(6100),S=t(5900),B=t(3970),A=t(835),Z=t(4709),z=t(3809),I=t(4238),N=t(5881),R=t(283),W=t(4032),E=t(9428),M=t(6710),$=t(7197),P=t(4866),L=t(6610),_=t(234),T=t(6749),O=t(2235),H=t(9669),Y=t(2089),U=t(8997),J=e=>{let{isOpen:o,onClose:t,playerData:i,gamePlayers:r=[],socket:p,roomId:J,bankBalance:X=0,onBankBalanceChange:q}=e,G=(0,s.Z)(),K=(0,l.Z)(G.breakpoints.down("md")),[Q,V]=(0,a.useState)(0),[ee,eo]=(0,a.useState)(""),[et,en]=(0,a.useState)(""),[ei,er]=(0,a.useState)([]),[ea,es]=(0,a.useState)(!1),[el,ec]=(0,a.useState)(""),[ed,eu]=(0,a.useState)(""),[ex,ep]=(0,a.useState)((null==p?void 0:p.connected)||!1),[eg,em]=(0,a.useState)(!1),[eb,eh]=(0,a.useState)(0),[ef,ey]=(0,a.useState)(""),[ej,eD]=(0,a.useState)(!1),[ev,eC]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      @keyframes shimmer {\n        0% { transform: translateX(-100%); }\n        100% { transform: translateX(100%); }\n      }\n    ",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]),(0,a.useEffect)(()=>{i&&r&&em(!0)},[i,r]);let eF=(0,a.useCallback)(()=>{if(!r||!Array.isArray(r)||!(null==i?void 0:i.id))return null;let e=r.find(e=>e.id===i.id||e.userId===i.id);return!e&&(null==i?void 0:i.username)&&(e=r.find(e=>e.username===i.username)),e},[r,null==i?void 0:i.id,null==i?void 0:i.username]),ek=(0,a.useCallback)(()=>{let e=eF();return e?(e.income||1200)-(e.expenses||800)-.1*eb:0},[eF,eb]),ew=(0,a.useCallback)(()=>Math.max(0,1e3*Math.floor(ek()/100)),[ek]),eS=(0,a.useCallback)(()=>{let e=parseInt(ef);if(!e||e<=0||e%1e3!=0){ec("Сумма кредита должна быть кратной 1000");return}let o=ew();if(e>o){ec("Максимальный кредит: $".concat(o.toLocaleString()));return}eC(!0),setTimeout(()=>{eh(o=>o+e),V(o=>o+e);let o={id:Date.now().toString(),type:"credit",amount:e,description:"Взят кредит на $".concat(e.toLocaleString()),timestamp:new Date().toISOString(),from:"Банк",to:(null==i?void 0:i.username)||"Игрок",status:"completed",balanceAfter:Q+e};er(e=>[o,...e]),eu("Кредит на $".concat(e.toLocaleString()," успешно взят")),ey(""),eD(!1),eC(!1),q&&q(Q+e)},1e3)},[ef,ew,Q,null==i?void 0:i.username,q]),eB=(0,a.useCallback)(e=>{if(e>eb){ec("Нельзя погасить больше, чем взято в кредит");return}if(e>Q){ec("Недостаточно средств для погашения");return}eC(!0),setTimeout(()=>{eh(o=>o-e),V(o=>o-e);let o={id:Date.now().toString(),type:"credit",amount:-e,description:"Погашен кредит на $".concat(e.toLocaleString()),timestamp:new Date().toISOString(),from:(null==i?void 0:i.username)||"Игрок",to:"Банк",status:"completed",balanceAfter:Q-e};er(e=>[o,...e]),eu("Кредит на $".concat(e.toLocaleString()," успешно погашен")),eC(!1),q&&q(Q-e)},1e3)},[eb,Q,null==i?void 0:i.username,q]),eA=(0,a.useCallback)(()=>{let e=eF?eF():null,o=(null==e?void 0:e.profession)||(null==i?void 0:i.profession);return(null==o?void 0:o.balance)!==void 0?Number(o.balance):({Предприниматель:3e3,Учитель:2e3,Врач:5e3,Инженер:4e3,Юрист:6e3})[null==o?void 0:o.name]||3e3},[eF,null==i?void 0:i.profession,null==i?void 0:i.id]),eZ=(0,a.useCallback)(()=>r&&Array.isArray(r)&&(null==i?void 0:i.id)?r.filter(e=>e.id!==i.id&&e.userId!==i.id&&e.username&&""!==e.username.trim()):[],[r,null==i?void 0:i.id]),ez=(0,a.useCallback)(e=>{try{(null==i?void 0:i.id)&&J&&(localStorage.setItem("bank_history_".concat(i.id,"_").concat(J),JSON.stringify(e)),console.log("\uD83D\uDCBE [BankModal] История сохранена:",e.length,"записей для пользователя",i.id))}catch(e){console.error("❌ [BankModal] Ошибка сохранения истории:",e)}},[null==i?void 0:i.id,J]),eI=(0,a.useCallback)(()=>{eo(""),en(""),ec("")},[]),eN=(0,a.useCallback)(async()=>{if(!ee||!et||ea)return;if(!p||!p.connected){ec("Нет соединения с сервером. Попробуйте позже.");return}let e=parseFloat(ee);if(e<=0){ec("Сумма должна быть больше нуля");return}let o=eF?eF():null,t=(null==o?void 0:o.balance)!==void 0?o.balance:Q||0;if(console.log("\uD83D\uDD0D [BankModal] Проверка баланса для перевода:",{amount:parseFloat(ee),currentPlayerBalance:null==o?void 0:o.balance,bankBalance:Q,actualBalance:t,hasEnoughFunds:parseFloat(ee)<=t,playerData:o?{id:o.id,userId:o.userId,username:o.username,balance:o.balance}:null}),e>t){ec("Недостаточно средств на счету. Доступно: $".concat(t.toLocaleString()));return}if(!(eZ?eZ():[]).find(e=>e.username===et)){ec("Получатель не найден");return}es(!0),ec("");try{var n;let o={id:"transfer_".concat(Date.now()),type:"transfer",amount:e,description:"Перевод игроку ".concat(et),timestamp:new Date().toLocaleString("ru-RU"),from:(null===(n=eF?eF():null)||void 0===n?void 0:n.username)||(null==i?void 0:i.username)||"Игрок",to:et,status:"pending",balanceAfter:(Q||0)-e},r=[o,...ei];if(er(r),ez&&ez(r),p&&J){let n=eF?eF():null;console.log("\uD83D\uDCE4 [BankModal] Отправляем на сервер:",{amount:e,currentBalance:t,calculation:"".concat(t," - ").concat(e," = ").concat(t-e),recipient:et}),console.log("\uD83E\uDDEE [BankModal] Формула баланса (клиент):",{формула:"старый_баланс - сумма_перевода = новый_баланс",старый_баланс:t,сумма_перевода:e,новый_баланс:t-e,проверка:"".concat(t," - ").concat(e," = ").concat(t-e),корректно:t-e==t-e}),p.emit("bankTransfer",{roomId:J,playerId:(null==n?void 0:n.id)||(null==n?void 0:n.userId)||(null==i?void 0:i.id),socketId:p.id,username:(null==n?void 0:n.username)||(null==i?void 0:i.username),recipient:et,amount:e,currentBalance:t,transactionId:o.id})}eo(""),en("")}catch(e){console.error("❌ [BankModal] Ошибка при переводе:",e),ec("Ошибка при переводе средств"),er(e=>e.filter(e=>"pending"!==e.status))}finally{es(!1)}},[ee,et,ea,Q,eZ,eF,null==i?void 0:i.username,ei,ez,p,J,null==i?void 0:i.id]);(0,a.useEffect)(()=>{if(!o||!eg)return;let e=eF?eF():null,t=0;V(t=(null==e?void 0:e.balance)!==void 0&&null!==e.balance?Number(e.balance):null!=X&&X>0?Number(X):eA?eA():3e3),q&&t!==Q&&q(t);let n=[];if((null==i?void 0:i.id)&&J){let e=localStorage.getItem("bank_history_".concat(i.id,"_").concat(J));if(e)try{n=JSON.parse(e),console.log("\uD83D\uDCDC [BankModal] Загружена история транзакций:",n.length,"записей для пользователя",i.id)}catch(e){console.error("❌ [BankModal] Ошибка загрузки истории:",e),n=[]}}if(0===n.length&&t>0){var r;let e={id:"initial_".concat(Date.now()),type:"initial",amount:t,description:"Начальный баланс профессии",timestamp:new Date().toLocaleString("ru-RU"),from:"Банк",to:(null===(r=eF?eF():null)||void 0===r?void 0:r.username)||(null==i?void 0:i.username)||"Игрок",status:"completed",balanceAfter:t};n=[e],console.log("\uD83C\uDD95 [BankModal] Создана начальная транзакция:",e)}er(n),(null==i?void 0:i.id)&&J&&localStorage.setItem("bank_history_".concat(i.id,"_").concat(J),JSON.stringify(n))},[o,eg,eA,q,null==i?void 0:i.id,J,eF,X,Q]),(0,a.useEffect)(()=>{if(!eg)return;let e=eF?eF():null;if((null==e?void 0:e.balance)!==void 0&&e.balance!==Q){V(e.balance);return}void 0!==X&&X!==Q&&((null==e?void 0:e.balance)===void 0||null===e.balance)&&V(X)},[eg,X,Q,eF,null==i?void 0:i.id]),(0,a.useEffect)(()=>{if(!p||!o||!eg)return;let e=()=>{console.log("\uD83D\uDD0C [BankModal] WebSocket disconnected"),ep(!1),ec("Соединение с сервером потеряно. Попробуйте позже.")},t=()=>{console.log("\uD83D\uDD0C [BankModal] WebSocket connected"),ep(!0),ec("")},n=e=>{console.log("✅ [BankModal] Перевод успешен:",e),eu(e.message),void 0!==e.newBalance&&(V(e.newBalance),q&&q(e.newBalance),er(o=>o.map(o=>"pending"===o.status?{...o,status:"completed",balanceAfter:e.newBalance}:o)))},r=e=>{console.error("❌ [BankModal] Ошибка перевода:",e),ec(e.message),er(e=>e.filter(e=>"pending"!==e.status))},a=e=>{var o;console.log("\uD83D\uDCB0 [BankModal] Получен перевод:",e);let t={id:"received_".concat(Date.now()),type:"received",amount:e.amount,description:"Перевод от ".concat(e.fromPlayer),timestamp:new Date().toLocaleString("ru-RU"),from:e.fromPlayer,to:(null===(o=eF?eF():null)||void 0===o?void 0:o.username)||(null==i?void 0:i.username)||"Игрок",status:"completed",balanceAfter:(Q||0)+e.amount},n=(Q||0)+e.amount;V(n),q&&q(n);let r=[t,...ei];er(r),ez&&ez(r),eu("Получен перевод $".concat(e.amount.toLocaleString()," от ").concat(e.fromPlayer,"!"))};return p.on("bankTransferSuccess",n),p.on("bankTransferError",r),p.on("bankTransferReceived",a),p.on("disconnect",e),p.on("connect",t),()=>{p.off("bankTransferSuccess",n),p.off("bankTransferError",r),p.off("bankTransferReceived",a),p.off("disconnect",e),p.off("connect",t)}},[p,o,eg,Q,q,ei,ez,eF,null==i?void 0:i.username,null==i?void 0:i.id]);let eR=e=>{switch(e){case"initial":return(0,n.jsx)(E.Z,{});case"transfer":return(0,n.jsx)(M.Z,{});case"received":case"payday":return(0,n.jsx)($.Z,{});case"expense":return(0,n.jsx)(P.Z,{});case"credit":return(0,n.jsx)(g.Z,{});case"charity":return(0,n.jsx)(L.Z,{});default:return(0,n.jsx)(_.Z,{})}},eW=(e,o)=>"initial"===e||"received"===e||"credit"===e||"payday"===e?"#10B981":"expense"===e?"#F59E0B":"charity"===e?"#EC4899":"#EF4444",eE=e=>"initial"===e||"received"===e||"credit"===e||"payday"===e?"+":"-",{totalTransfers:eM,totalTransferAmount:e$,totalTransactions:eP}=(0,a.useMemo)(()=>{let e=ei.filter(e=>"transfer"===e.type);return{totalTransfers:e.length,totalTransferAmount:e.reduce((e,o)=>e+o.amount,0),totalTransactions:ei.length}},[ei]),eL=(0,a.useMemo)(()=>{let e=eF?eF():null;return((null==e?void 0:e.balance)!==void 0?e.balance:Q||0).toLocaleString()},[eF,Q]);return o&&eg?(0,n.jsxs)(m.Z,{open:o,onClose:t,maxWidth:"lg",fullWidth:!0,fullScreen:K,PaperProps:{sx:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%)",borderRadius:"20px",overflow:"hidden",minHeight:K?"100vh":"auto",maxHeight:K?"100vh":"90vh",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)",backdropFilter:"blur(20px)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #10B981, #059669, #10B981)",animation:"shimmer 2s infinite"}}},children:[(0,n.jsxs)(b.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:3,pt:3,px:3,background:"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(d.Z,{sx:{width:40,height:40,borderRadius:"10px",background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:(0,n.jsx)(g.Z,{sx:{fontSize:24,color:"white"}})}),(0,n.jsx)(u.Z,{variant:"h4",sx:{fontWeight:"bold",color:"white",textShadow:"0 0 10px rgba(16, 185, 129, 0.3)"},children:"Банковские операции"})]}),(0,n.jsx)(h.Z,{onClick:t,sx:{color:"white",background:"rgba(255, 255, 255, 0.1)","&:hover":{background:"rgba(255, 255, 255, 0.2)"}},children:(0,n.jsx)(T.Z,{})})]}),(0,n.jsx)(f.Z,{sx:{p:3,background:"transparent",borderRadius:"0 0 20px 20px"},children:(0,n.jsxs)(y.Z,{container:!0,spacing:3,sx:{height:"100%"},children:[(0,n.jsx)(y.Z,{item:!0,xs:12,md:4,sx:{height:"100%"},children:(0,n.jsx)(j.Z,{sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%",display:"flex",flexDirection:"column"},children:(0,n.jsxs)(D.Z,{sx:{p:3,flex:1,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[(0,n.jsx)(g.Z,{sx:{color:"#4CAF50",mr:1,fontSize:24}}),(0,n.jsx)(u.Z,{variant:"h6",sx:{fontWeight:"bold",color:"white",mr:2},children:"Банк"}),(0,n.jsx)(x.Z,{label:"Активен",size:"small",sx:{background:"#4CAF50",color:"white",fontWeight:"bold",fontSize:"10px"}})]}),(0,n.jsxs)(d.Z,{sx:{textAlign:"center",mb:3},children:[(0,n.jsxs)(u.Z,{variant:"h4",sx:{color:"#4CAF50",fontWeight:"bold",mb:1},children:["$",eL]}),(0,n.jsx)(u.Z,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Доступно для операций"})]}),(0,n.jsxs)(d.Z,{sx:{mb:3},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,n.jsx)(O.Z,{sx:{color:"#4CAF50",mr:1}}),(0,n.jsx)(u.Z,{variant:"body2",sx:{color:"#4CAF50"},children:"Доход: $10,000"})]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,n.jsx)(H.Z,{sx:{color:"#f44336",mr:1}}),(0,n.jsx)(u.Z,{variant:"body2",sx:{color:"#f44336"},children:"Расходы: $6,200"})]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,n.jsx)($.Z,{sx:{color:"#FFC107",mr:1}}),(0,n.jsx)(u.Z,{variant:"body2",sx:{color:"#FFC107"},children:"PAYDAY: $3,800/мес"})]})]}),(0,n.jsxs)(d.Z,{sx:{mt:"auto"},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,n.jsx)(_.Z,{sx:{color:eb>0?"#f44336":"#4CAF50",mr:1,fontSize:16}}),(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"white"},children:["Кредит: $",eb.toLocaleString()]})]}),(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"#9C27B0",mb:1},children:["Макс. кредит: $",ew().toLocaleString()]}),(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"#FFC107",mb:2,fontSize:"12px"},children:["Денежный поток: $",ek().toLocaleString(),"/мес"]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",gap:1},children:[eb>0?(0,n.jsxs)(c.Z,{variant:"contained",size:"small",onClick:()=>eB(eb),disabled:ev||Q<eb,sx:{background:"#4CAF50",color:"white",flex:1,"&:hover":{background:"#45a049"},"&:disabled":{background:"rgba(255, 255, 255, 0.1)"}},children:[(0,n.jsx)(Y.Z,{sx:{mr:.5,fontSize:16}}),"ПОГАСИТЬ"]}):(0,n.jsxs)(c.Z,{variant:"contained",size:"small",disabled:!0,sx:{background:"#4CAF50",color:"white",flex:1,opacity:.7},children:[(0,n.jsx)(Y.Z,{sx:{mr:.5,fontSize:16}}),"БЕЗ КРЕДИТОВ"]}),(0,n.jsxs)(c.Z,{variant:"contained",size:"small",onClick:()=>eD(!0),disabled:ev||0>=ew(),sx:{background:ew()>0?"#f44336":"rgba(255, 255, 255, 0.1)",color:"white",flex:1,"&:hover":{background:ew()>0?"#d32f2f":"rgba(255, 255, 255, 0.1)"},"&:disabled":{background:"rgba(255, 255, 255, 0.1)"}},children:[(0,n.jsx)(_.Z,{sx:{mr:.5,fontSize:16}}),"ВЗЯТЬ"]})]})]})]})})}),(0,n.jsx)(y.Z,{item:!0,xs:12,md:8,sx:{height:"100%"},children:(0,n.jsxs)(y.Z,{container:!0,spacing:3,sx:{height:"100%"},children:[(0,n.jsx)(y.Z,{item:!0,xs:12,sx:{height:"50%"},children:(0,n.jsx)(j.Z,{sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%",display:"flex",flexDirection:"column"},children:(0,n.jsxs)(D.Z,{sx:{p:3,flex:1,display:"flex",flexDirection:"column"},children:[(0,n.jsx)(u.Z,{variant:"h6",sx:{mb:3,fontWeight:"bold",color:"white"},children:"Перевод средств"}),(0,n.jsxs)(y.Z,{container:!0,spacing:2,sx:{flex:1},children:[(0,n.jsx)(y.Z,{item:!0,xs:12,sm:6,children:(0,n.jsxs)(v.Z,{fullWidth:!0,children:[(0,n.jsx)(C.Z,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Получатель"}),(0,n.jsx)(F.Z,{value:et,onChange:e=>en(e.target.value),sx:{color:"white",borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.4)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#10B981",borderWidth:"2px"}},children:(eZ?eZ():[]).map(e=>(0,n.jsx)(k.Z,{value:e.username,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(w.Z,{sx:{width:24,height:24,fontSize:12},children:e.username.charAt(0).toUpperCase()}),e.username]})},e.id||e.userId||e.socketId))})]})}),(0,n.jsx)(y.Z,{item:!0,xs:12,sm:6,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"Сумма ($)",type:"number",value:ee,onChange:e=>eo(e.target.value),sx:{"& .MuiOutlinedInput-root":{color:"white",borderRadius:"12px","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.4)"},"&.Mui-focused fieldset":{borderColor:"#10B981",borderWidth:"2px"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})}),(0,n.jsx)(y.Z,{item:!0,xs:12,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(c.Z,{variant:"contained",onClick:eN,disabled:!ee||!et||ea||0>=parseFloat(ee)||!ex,startIcon:(0,n.jsx)(M.Z,{}),sx:{flex:1,background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",py:1.5,borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",boxShadow:"0 6px 16px rgba(16, 185, 129, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)"},transition:"all 0.3s ease"},children:ea?"Выполняется...":"Выполнить перевод"}),(0,n.jsx)(c.Z,{variant:"outlined",onClick:eI||(()=>{eo(""),en(""),ec("")}),sx:{borderColor:"rgba(255, 255, 255, 0.3)",color:"white",py:1.5,borderRadius:"12px",fontWeight:"bold","&:hover":{borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Сбросить"})]})})]})]})})}),(0,n.jsx)(y.Z,{item:!0,xs:12,sx:{height:"50%"},children:(0,n.jsx)(j.Z,{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"15px",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%",display:"flex",flexDirection:"column"},children:(0,n.jsxs)(D.Z,{sx:{flex:1,display:"flex",flexDirection:"column",p:2},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,n.jsx)(U.Z,{sx:{color:"#8B5CF6"}}),(0,n.jsx)(u.Z,{variant:"h6",sx:{fontWeight:"bold",color:"white"},children:"История операций"}),(0,n.jsx)(x.Z,{label:ei.length,size:"small",sx:{backgroundColor:"#8B5CF6",color:"white",fontWeight:"bold",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)","&:hover":{backgroundColor:"#7C3AED",boxShadow:"0 6px 16px rgba(139, 92, 246, 0.4)"}}})]}),0===ei.length?(0,n.jsx)(d.Z,{sx:{textAlign:"center",py:4},children:(0,n.jsx)(u.Z,{variant:"body1",sx:{opacity:.7,color:"#94A3B8"},children:"История операций пуста"})}):(0,n.jsx)(B.Z,{sx:{flex:1,overflow:"auto"},children:ei.map((e,o)=>(0,n.jsxs)(a.Fragment,{children:[(0,n.jsxs)(A.ZP,{sx:{py:2,backgroundColor:o%2==0?"rgba(255, 255, 255, 0.02)":"rgba(255, 255, 255, 0.05)",borderRadius:1,mb:1},children:[(0,n.jsx)(Z.Z,{children:(0,n.jsx)(d.Z,{sx:{p:1,borderRadius:"50%",backgroundColor:(eW?eW(e.type,e.amount):"#10B981")+"20",color:eW?eW(e.type,e.amount):"#10B981"},children:eR?eR(e.type):(0,n.jsx)(_.Z,{})})}),(0,n.jsx)(z.Z,{primary:(0,n.jsxs)(d.Z,{component:"span",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,n.jsx)(d.Z,{component:"span",sx:{fontWeight:"bold",fontSize:"1rem"},children:e.description}),(0,n.jsxs)(d.Z,{component:"span",sx:{fontWeight:"bold",fontSize:"1.25rem",color:eW?eW(e.type,e.amount):"#10B981"},children:[eE?eE(e.type):"+","$",e.amount.toLocaleString()]})]}),secondary:(0,n.jsxs)(d.Z,{component:"span",sx:{display:"block"},children:[(0,n.jsxs)(d.Z,{component:"span",sx:{opacity:.7,fontSize:"0.875rem",display:"block"},children:[e.from," → ",e.to]}),(0,n.jsx)(d.Z,{component:"span",sx:{opacity:.5,fontSize:"0.875rem",display:"block"},children:e.timestamp})]})}),(0,n.jsx)(I.Z,{children:(0,n.jsx)(x.Z,{label:"completed"===e.status?"Завершено":"В процессе",size:"small",sx:{backgroundColor:"completed"===e.status?"#10B981":"#F59E0B",color:"white",fontWeight:"bold"}})})]}),o<ei.length-1&&(0,n.jsx)(N.Z,{sx:{opacity:.1}})]},e.id))})]})})})]})})]})}),(0,n.jsx)(R.Z,{open:!!el,autoHideDuration:6e3,onClose:()=>ec(""),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,n.jsx)(W.Z,{onClose:()=>ec(""),severity:"error",sx:{width:"100%"},children:el})}),(0,n.jsx)(R.Z,{open:!!ed,autoHideDuration:4e3,onClose:()=>eu(""),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,n.jsx)(W.Z,{onClose:()=>eu(""),severity:"success",sx:{width:"100%"},children:ed})}),(0,n.jsxs)(m.Z,{open:ej,onClose:()=>eD(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)"}},children:[(0,n.jsxs)(b.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:2,pt:3,px:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(_.Z,{sx:{color:"#f44336",fontSize:28}}),(0,n.jsx)(u.Z,{variant:"h5",sx:{fontWeight:"bold",color:"white"},children:"Взять кредит"})]}),(0,n.jsx)(h.Z,{onClick:()=>eD(!1),sx:{color:"white"},children:(0,n.jsx)(T.Z,{})})]}),(0,n.jsxs)(f.Z,{sx:{p:3},children:[(0,n.jsxs)(d.Z,{sx:{mb:3},children:[(0,n.jsx)(u.Z,{variant:"body1",sx:{color:"white",mb:2},children:"Выберите сумму кредита (кратную 1000):"}),(0,n.jsx)(S.Z,{fullWidth:!0,label:"Сумма кредита ($)",type:"number",value:ef,onChange:e=>ey(e.target.value),placeholder:"Введите сумму, кратную 1000",sx:{"& .MuiOutlinedInput-root":{color:"white",borderRadius:"12px","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.4)"},"&.Mui-focused fieldset":{borderColor:"#f44336",borderWidth:"2px"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})]}),(0,n.jsxs)(d.Z,{sx:{mb:3},children:[(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",mb:1},children:["Максимальный кредит: ",(0,n.jsxs)("strong",{style:{color:"#9C27B0"},children:["$",ew().toLocaleString()]})]}),(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",mb:1},children:["Текущий денежный поток: ",(0,n.jsxs)("strong",{style:{color:"#FFC107"},children:["$",ek().toLocaleString(),"/мес"]})]}),(0,n.jsxs)(u.Z,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)"},children:["Ежемесячный платеж: ",(0,n.jsxs)("strong",{style:{color:"#f44336"},children:["$",ef?(.1*parseInt(ef)).toLocaleString():"0","/мес"]})]})]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(c.Z,{variant:"contained",onClick:eS,disabled:!ef||ev||parseInt(ef)%1e3!=0||parseInt(ef)>ew(),sx:{flex:1,background:"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",color:"white",py:1.5,borderRadius:"12px",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%)"},"&:disabled":{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)"}},children:ev?"Обработка...":"Взять кредит"}),(0,n.jsx)(c.Z,{variant:"outlined",onClick:()=>eD(!1),sx:{borderColor:"rgba(255, 255, 255, 0.3)",color:"white",py:1.5,borderRadius:"12px",fontWeight:"bold","&:hover":{borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.1)"}},children:"Отмена"})]})]})]})]}):null},X=e=>{var o;let{playerData:t,gamePlayers:i,socket:r,bankBalance:m,playerCredit:b,getMaxCredit:h,getCashFlow:f,setShowCreditModal:y,roomId:j,onBankBalanceChange:D}=e,v=(0,s.Z)(),C=(0,l.Z)(v.breakpoints.down("md")),[F,k]=(0,a.useState)(!1),[w,S]=(0,a.useState)(0),B=(0,a.useCallback)(()=>{if(!i||!Array.isArray(i)||!(null==t?void 0:t.id))return null;let e=i.find(e=>e.id===t.id||e.userId===t.id);return!e&&(null==t?void 0:t.username)&&(e=i.find(e=>e.username===t.username)),e},[i,null==t?void 0:t.id,null==t?void 0:t.username]),A=(0,a.useCallback)(()=>{let e=B(),o=(null==e?void 0:e.profession)||(null==t?void 0:t.profession);return(null==o?void 0:o.balance)!==void 0?Number(o.balance):({Предприниматель:3e3,Учитель:2e3,Врач:5e3,Инженер:4e3,Юрист:6e3})[null==o?void 0:o.name]||3e3},[B,null==t?void 0:t.profession]);(0,a.useEffect)(()=>{var e,o;let n=B(),i=0;console.log("\uD83D\uDD0D [BankModule] Источники баланса:",{currentPlayerBalance:null==n?void 0:n.balance,bankBalanceProp:m,professionBalance:null==t?void 0:null===(e=t.profession)||void 0===e?void 0:e.balance,initialBalance:A(),currentPlayer:n}),(null==n?void 0:n.balance)!==void 0&&null!==n.balance?console.log("✅ [BankModule] Используем баланс из gamePlayers:",i=Number(n.balance)):null!=m&&m>0?console.log("✅ [BankModule] Используем внешний баланс:",i=Number(m)):(null==t?void 0:null===(o=t.profession)||void 0===o?void 0:o.balance)!==void 0&&null!==t.profession.balance?console.log("✅ [BankModule] Используем баланс из профессии:",i=Number(t.profession.balance)):console.log("✅ [BankModule] Используем начальный баланс:",i=A()),i!==w&&(S(i),console.log("\uD83C\uDFE6 [BankModule] Баланс изменен:",{userId:null==t?void 0:t.id,username:null==t?void 0:t.username,newBalance:i,previousBalance:w,source:(null==n?void 0:n.balance)!==void 0?"player":m>0?"external":"initial"}))},[i,null==t?void 0:null===(o=t.profession)||void 0===o?void 0:o.balance,m,B,A,w]);let Z=(0,a.useCallback)(e=>{console.log("\uD83D\uDD04 [BankModule] Получено изменение баланса:",e),S(e),D&&D(e)},[D]);return(0,a.useCallback)(()=>{let e=B(),o=(null==e?void 0:e.profession)||(null==t?void 0:t.profession);if(o){var n,i;return{salary:null!==(n=o.salary)&&void 0!==n?n:0,totalExpenses:null!==(i=o.totalExpenses)&&void 0!==i?i:0}}return{salary:0,totalExpenses:0}},[B,null==t?void 0:t.profession])(),(0,n.jsxs)(p.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.3},children:[(0,n.jsxs)(c.Z,{variant:"contained",onClick:()=>{console.log("\uD83C\uDFE6 [BankModule] Кнопка банка нажата, текущий баланс:",w),k(!0)},sx:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative",overflow:"hidden",cursor:"pointer",transition:"all 0.3s ease",p:3,minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,width:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(16, 185, 129, 0.3)",background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(51, 65, 85, 0.95) 100%)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #10B981, #059669, #10B981)",animation:"shimmer 2s infinite"}},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(g.Z,{sx:{color:"#10B981",fontSize:"1.5rem"}}),(0,n.jsx)(u.Z,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"Банк"}),(0,n.jsx)(x.Z,{label:"Активен",size:"small",sx:{backgroundColor:"rgba(16, 185, 129, 0.2)",color:"#10B981",fontWeight:"bold",fontSize:"0.7rem"}})]}),(0,n.jsxs)(d.Z,{sx:{textAlign:"center"},children:[(0,n.jsxs)(u.Z,{variant:C?"h4":"h3",sx:{color:"#10B981",fontWeight:"bold",textShadow:"0 0 10px rgba(16, 185, 129, 0.3)",mb:.5},children:["$",(null!=w?w:0).toLocaleString()]}),(0,n.jsx)(u.Z,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.8rem",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Нажмите для открытия банковских операций"})]})]}),(0,n.jsx)(J,{isOpen:F,onClose:()=>k(!1),playerData:t,gamePlayers:i,socket:r,roomId:j,bankBalance:w,onBankBalanceChange:Z})]})};let q=[{id:1,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:2,type:"expenses",name:"Всякая всячина",color:"#EC4899",icon:"\uD83D\uDECD️"},{id:3,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:4,type:"charity",name:"Благотворительность",color:"#F97316",icon:"❤️"},{id:5,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:6,type:"payday",name:"PayDay",color:"#EAB308",icon:"\uD83D\uDCB0"},{id:7,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:8,type:"market",name:"Рынок",color:"#06B6D4",icon:"\uD83C\uDFEA"},{id:9,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:10,type:"expenses",name:"Всякая всячина",color:"#EC4899",icon:"\uD83D\uDECD️"},{id:11,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:12,type:"child",name:"Ребенок",color:"#A855F7",icon:"\uD83D\uDC76"},{id:13,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:14,type:"payday",name:"PayDay",color:"#EAB308",icon:"\uD83D\uDCB0"},{id:15,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:16,type:"market",name:"Рынок",color:"#06B6D4",icon:"\uD83C\uDFEA"},{id:17,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:18,type:"expenses",name:"Всякая всячина",color:"#EC4899",icon:"\uD83D\uDECD️"},{id:19,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:20,type:"loss",name:"Потеря",color:"#18181B",icon:"\uD83D\uDCB8"},{id:21,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:22,type:"payday",name:"PayDay",color:"#EAB308",icon:"\uD83D\uDCB0"},{id:23,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:24,type:"market",name:"Рынок",color:"#06B6D4",icon:"\uD83C\uDFEA"}],G=[{id:1,type:"start",name:"СТАРТ",color:"#FFD700",icon:"\uD83C\uDFC1"},{id:2,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:3,type:"business",name:"Кофейня",color:"#4CAF50",icon:"☕",cost:1e5,income:3e3,description:"Кофейня в центре города"},{id:4,type:"loss",name:"Аудит",color:"#8B0000",icon:"\uD83D\uDCCA",loss:"50% активов",description:"Неожиданные расходы на аудит"},{id:5,type:"business",name:"СПА-центр",color:"#4CAF50",icon:"\uD83E\uDDD8",cost:27e4,income:5e3,description:"Центр здоровья и спа"},{id:6,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:7,type:"business",name:"Мобильное приложение",color:"#4CAF50",icon:"\uD83D\uDCF1",cost:42e4,income:1e4,description:"Мобильное приложение (подписка)"},{id:8,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:9,type:"business",name:"Маркетинг",color:"#4CAF50",icon:"\uD83D\uDCC8",cost:16e4,income:4e3,description:"Агентство цифрового маркетинга"},{id:10,type:"loss",name:"Кража",color:"#8B0000",icon:"\uD83D\uDCB0",loss:"100% наличных",description:"Кража 100% наличных"},{id:11,type:"business",name:"Мини-отель",color:"#4CAF50",icon:"\uD83C\uDFE8",cost:2e5,income:5e3,description:"Мини-отель/бутик-гостиница"},{id:12,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:13,type:"business",name:"Франшиза ресторана",color:"#4CAF50",icon:"\uD83C\uDF7D️",cost:32e4,income:8e3,description:"Франшиза популярного ресторана"},{id:14,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:15,type:"business",name:"Йога-центр",color:"#4CAF50",icon:"\uD83E\uDDD8‍♀️",cost:17e4,income:4500,description:"Йога- и медитационный центр"},{id:16,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:17,type:"business",name:"Салон красоты",color:"#4CAF50",icon:"\uD83D\uDC84",cost:5e5,income:15e3,description:"Салон красоты/барбершоп"},{id:18,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:19,type:"business",name:"Автомойки",color:"#4CAF50",icon:"\uD83D\uDE97",cost:12e4,income:3e3,description:"Сеть автомоек самообслуживания"},{id:20,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:21,type:"business",name:"Ретрит-центр",color:"#4CAF50",icon:"\uD83C\uDFD4️",cost:5e5,income:0,description:"Построить ретрит-центр"},{id:22,type:"loss",name:"Развод",color:"#8B0000",icon:"\uD83D\uDC94",loss:"50% активов",description:"Неожиданные расходы на развод"},{id:23,type:"business",name:"Автомойки 2",color:"#4CAF50",icon:"\uD83D\uDE97",cost:12e4,income:3500,description:"Сеть автомоек самообслуживания"},{id:24,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:25,type:"business",name:"Кругосветное плавание",color:"#4CAF50",icon:"⛵",cost:3e5,income:0,description:"Кругосветное плавание на паруснике"},{id:26,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:27,type:"business",name:"Частный самолёт",color:"#4CAF50",icon:"✈️",cost:1e6,income:0,description:"Купить частный самолёт"},{id:28,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:29,type:"business",name:"Лидер мнений",color:"#4CAF50",icon:"\uD83D\uDC51",cost:1e6,income:0,description:"Стать мировым лидером мнений"},{id:30,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:31,type:"business",name:"Биржа",color:"#4CAF50",icon:"\uD83D\uDCCA",cost:5e4,income:5e5,description:"Биржа (с бонусом при 5-6)",special:"Бонус при выпадении 5-6"},{id:32,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:33,type:"business",name:"Фильм",color:"#4CAF50",icon:"\uD83C\uDFAC",cost:5e5,income:0,description:"Снять полнометражный фильм"},{id:34,type:"loss",name:"Рейдерский захват",color:"#8B0000",icon:"⚔️",loss:"Бизнес с крупным доходом",description:"Рейдерский захват - потеря бизнеса"},{id:35,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:36,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:37,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:38,type:"business",name:'Франшиза "Поток"',color:"#4CAF50",icon:"\uD83C\uDFB2",cost:1e5,income:1e4,description:'Франшиза "поток денег"'},{id:39,type:"loss",name:"Санкции",color:"#8B0000",icon:"\uD83D\uDEAB",loss:"Все банковские счета",description:"Санкции заблокировали все счета"},{id:40,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:41,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:42,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:43,type:"business",name:"Пекарня",color:"#4CAF50",icon:"\uD83E\uDD56",cost:3e5,income:7e3,description:"Пекарня с доставкой"},{id:44,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:45,type:"business",name:"Онлайн-образование",color:"#4CAF50",icon:"\uD83C\uDF93",cost:2e5,income:5e3,description:"Онлайн-образовательная платформа"},{id:46,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:47,type:"business",name:"Фитнес-студии",color:"#4CAF50",icon:"\uD83D\uDCAA",cost:75e4,income:2e4,description:"Сеть фитнес-студий"},{id:48,type:"business",name:"Кругосветное путешествие",color:"#4CAF50",icon:"\uD83C\uDF0D",cost:3e5,income:0,description:"Кругосветное путешествие"},{id:49,type:"business",name:"Коворкинг",color:"#4CAF50",icon:"\uD83C\uDFE2",cost:5e5,income:1e4,description:"Коворкинг-пространство"},{id:50,type:"charity",name:"Благотворительность",color:"#FF69B4",icon:"❤️",description:"Поделитесь с теми, кто нуждается"},{id:51,type:"opportunity",name:"Возможность",color:"#10B981",icon:"\uD83C\uDFAF"},{id:52,type:"payday",name:"Зарплата",color:"#FFD700",icon:"\uD83D\uDCB0",description:"Получите зарплату"}];var K=e=>{var o,t,i;let{players:s,currentPlayer:l,currentIndex:c,onRollDice:d,onBuyCard:u,onGetGameState:x,isMyTurn:p}=e,[g,m]=(0,a.useState)(null),[b,h]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),[j,D]=(0,a.useState)(120),[v,C]=(0,a.useState)(!1),[F,k]=(0,a.useState)(0),[w,S]=(0,a.useState)(!1),[B,A]=(0,a.useState)(!1),[Z,z]=(0,a.useState)(10),[I,N]=(0,a.useState)([]),[R,W]=(0,a.useState)(0),[E,M]=(0,a.useState)({}),[$,P]=(0,a.useState)(!1),[L,_]=(0,a.useState)(!1),[T,O]=(0,a.useState)(null),[H,Y]=(0,a.useState)(!1),U=()=>window.innerWidth<768?Math.min(.9*window.innerWidth,400):window.innerWidth<1024?600:800,J=U(),K=U()/800,Q=()=>0===I.length?null:I[R],V=()=>{W(e=>(e+1)%I.length),C(!1),_(!1),D(120)},ee=async(e,o)=>{P(!0);let t=E[e]||0;for(let n=1;n<=o;n++){let o=(t+n)%24;M(t=>({...t,[e]:o})),await new Promise(e=>setTimeout(e,500))}P(!1)},eo=e=>{O(e),Y(!0)},et=()=>{Y(!1),O(null)},en=async()=>{b||$||(h(!0),m(null),C(!0),k(Date.now()),setTimeout(async()=>{let e=Math.floor(6*Math.random())+1;m(e),h(!1);let o=Q();o&&await ee(o.id,e),setTimeout(()=>{_(!0)},5e3),d()},1e3))},ei=()=>{V(),k(0)};return(0,a.useEffect)(()=>{if(!B)return;let e=setInterval(()=>{z(e=>e<=1?(A(!1),0):e-1)},1e3);return()=>clearInterval(e)},[B]),(0,a.useEffect)(()=>{if(!w||B){D(120),C(!1),k(0);return}let e=Q();if(!e||e.id!==(null==e?void 0:e.id)){D(120),C(!1),k(0);return}let o=setInterval(()=>{D(e=>e<=0?(ei(),120):e-1)},1e3);return()=>clearInterval(o)},[w,B,R,I]),(0,a.useEffect)(()=>{v&&F>0&&Date.now()},[v,F]),(0,n.jsxs)("div",{style:{display:"flex",gap:"20px",maxWidth:"1200px",margin:"0 auto",flexDirection:window.innerWidth<1024?"column":"row",alignItems:"center",padding:"20px"},className:"jsx-e314447532c79391",children:[(0,n.jsxs)("div",{style:{position:"relative",width:"".concat(J,"px"),height:"".concat(J,"px"),background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",borderRadius:"".concat(20*K,"px"),border:"".concat(3*K,"px solid rgba(255, 255, 255, 0.2)"),boxShadow:"0 ".concat(20*K,"px ").concat(40*K,"px rgba(0, 0, 0, 0.5)"),overflow:"hidden"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2},className:"jsx-e314447532c79391",children:(0,n.jsxs)("div",{style:{width:"".concat(160*K,"px"),height:"".concat(160*K,"px"),background:"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 ".concat(8*K,"px ").concat(32*K,"px rgba(255, 215, 0, 0.4), 0 0 0 ").concat(4*K,"px rgba(255, 215, 0, 0.2)"),position:"relative",overflow:"hidden"},className:"jsx-e314447532c79391",children:[(0,n.jsxs)("div",{style:{width:"".concat(140*K,"px"),height:"".concat(140*K,"px"),background:"radial-gradient(circle, #000000 0%, #1a1a1a 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{fontSize:"".concat(48*K,"px"),fontWeight:"bold",color:"#FFD700",textShadow:"0 0 ".concat(20*K,"px rgba(255, 215, 0, 0.8), 0 0 ").concat(40*K,"px rgba(255, 165, 0, 0.6)"),zIndex:3,position:"relative",animation:b?"diceRoll 0.1s infinite":"none"},className:"jsx-e314447532c79391",children:g||"\uD83C\uDFB2"}),(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"conic-gradient(from 0deg, transparent 0deg, rgba(255, 215, 0, 0.3) 45deg, transparent 90deg, rgba(255, 165, 0, 0.3) 135deg, transparent 180deg, rgba(255, 140, 0, 0.3) 225deg, transparent 270deg, rgba(255, 215, 0, 0.3) 315deg, transparent 360deg)",animation:"rotate 4s linear infinite"},className:"jsx-e314447532c79391"}),(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%"},className:"jsx-e314447532c79391",children:[0,60,120,180,240,300].map((e,o)=>(0,n.jsx)("div",{style:{position:"absolute",width:"".concat(6*K,"px"),height:"".concat(6*K,"px"),background:"#FFD700",borderRadius:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(".concat(e,"deg) translateY(-50px)"),boxShadow:"0 0 10px rgba(255, 215, 0, 0.8)",animation:"pulse ".concat(2+.3*o,"s ease-in-out infinite")},className:"jsx-e314447532c79391"},o))})]}),(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%"},className:"jsx-e314447532c79391",children:[45,135,225,315].map((e,o)=>(0,n.jsx)("div",{style:{position:"absolute",width:"24px",height:"24px",background:"radial-gradient(circle, #FFD700 0%, #FFA500 100%)",borderRadius:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(".concat(e,"deg) translateY(-70px)"),display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(255, 215, 0, 0.6)",border:"2px solid #FFD700"},className:"jsx-e314447532c79391",children:(0,n.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#000000"},className:"jsx-e314447532c79391",children:"$"})},o))})]})}),q.map((e,o)=>{let t=360*o/24,i=168*K;return(0,n.jsx)("div",{style:{position:"absolute",left:J/2+Math.cos((t-90)*Math.PI/180)*i-28*K,top:J/2+Math.sin((t-90)*Math.PI/180)*i-28*K,width:56*K,height:56*K,background:e.color,borderRadius:"".concat(11*K,"px"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"".concat(22*K,"px"),color:"white",fontWeight:"bold",boxShadow:"0 ".concat(3*K,"px ").concat(11*K,"px rgba(0,0,0,0.3)"),cursor:"pointer",transition:"all 0.3s ease",zIndex:2},title:"".concat(e.name," (").concat(e.id,") - Нажмите для подробностей"),onClick:()=>eo(e),children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,n.jsx)("div",{style:{position:"absolute",bottom:"".concat(2*K,"px"),left:"".concat(2*K,"px"),fontSize:"".concat(8*K,"px"),fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"50%",width:"".concat(12*K,"px"),height:"".concat(12*K,"px"),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:e.id}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.icon})]})},e.id)}),(()=>{let e=[];for(let o=0;o<14;o++){let t=G[o],i=65+48*o;e.push((0,n.jsx)("div",{style:{position:"absolute",left:i,top:65,width:46,height:46,background:t.color,borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",color:"white",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",cursor:"pointer",transition:"all 0.3s ease",zIndex:2},title:"".concat(t.name," (").concat(t.id,")"),children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"1px",left:"1px",fontSize:"6px",fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"50%",width:"10px",height:"10px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:t.id}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:t.icon})]})},"top-".concat(t.id)))}for(let o=0;o<12;o++){let t=G[14+o],i=65+(o+1)*48;e.push((0,n.jsx)("div",{style:{position:"absolute",left:689,top:i,width:46,height:46,background:t.color,borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",color:"white",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",cursor:"pointer",transition:"all 0.3s ease",zIndex:2},title:"".concat(t.name," (").concat(t.id,")"),children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"1px",left:"1px",fontSize:"6px",fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"50%",width:"10px",height:"10px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:t.id}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:t.icon})]})},"right-".concat(t.id)))}for(let o=0;o<14;o++){let t=G[26+o],i=65+(13-o)*48;e.push((0,n.jsx)("div",{style:{position:"absolute",left:i,top:689,width:46,height:46,background:t.color,borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",color:"white",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",cursor:"pointer",transition:"all 0.3s ease",zIndex:2},title:"".concat(t.name," (").concat(t.id,")"),children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"1px",left:"1px",fontSize:"6px",fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"50%",width:"10px",height:"10px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:t.id}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:t.icon})]})},"bottom-".concat(t.id)))}for(let o=0;o<12;o++){let t=G[40+o],i=65+(12-o)*48;e.push((0,n.jsx)("div",{style:{position:"absolute",left:65,top:i,width:46,height:46,background:t.color,borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",color:"white",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",cursor:"pointer",transition:"all 0.3s ease",zIndex:2},title:"".concat(t.name," (").concat(t.id,")"),children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"1px",left:"1px",fontSize:"6px",fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"50%",width:"10px",height:"10px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:t.id}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:t.icon})]})},"left-".concat(t.id)))}return e})(),(()=>{let e=60*K,o=80*K;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"absolute",left:130*K,top:130*K,width:e,height:o,background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",borderRadius:"".concat(12*K,"px"),border:"".concat(3*K,"px solid #FF6B35"),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 ".concat(8*K,"px ").concat(25*K,"px rgba(255, 215, 0, 0.6)"),zIndex:3,cursor:"pointer",transition:"all 0.3s ease"},title:"Большая сделка",children:[(0,n.jsx)("div",{style:{fontSize:"".concat(24*K,"px"),marginBottom:"".concat(4*K,"px")},children:"\uD83D\uDCB0"}),(0,n.jsx)("div",{style:{fontSize:"".concat(8*K,"px"),fontWeight:"bold",textAlign:"center",color:"#8B4513"},children:"Большая сделка"})]}),(0,n.jsxs)("div",{style:{position:"absolute",right:130*K,top:130*K,width:e,height:o,background:"linear-gradient(135deg, #32CD32 0%, #228B22 100%)",borderRadius:"".concat(12*K,"px"),border:"".concat(3*K,"px solid #FF6B35"),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 ".concat(8*K,"px ").concat(25*K,"px rgba(50, 205, 50, 0.6)"),zIndex:3,cursor:"pointer",transition:"all 0.3s ease"},title:"Малая сделка",children:[(0,n.jsx)("div",{style:{fontSize:"".concat(24*K,"px"),marginBottom:"".concat(4*K,"px")},children:"\uD83D\uDCBC"}),(0,n.jsx)("div",{style:{fontSize:"".concat(8*K,"px"),fontWeight:"bold",textAlign:"center",color:"white"},children:"Малая сделка"})]}),(0,n.jsxs)("div",{style:{position:"absolute",right:130*K,bottom:130*K,width:e,height:o,background:"linear-gradient(135deg, #4169E1 0%, #0000CD 100%)",borderRadius:"".concat(12*K,"px"),border:"".concat(3*K,"px solid #FF6B35"),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 ".concat(8*K,"px ").concat(25*K,"px rgba(65, 105, 225, 0.6)"),zIndex:3,cursor:"pointer",transition:"all 0.3s ease"},title:"Рынок",children:[(0,n.jsx)("div",{style:{fontSize:"".concat(24*K,"px"),marginBottom:"".concat(4*K,"px")},children:"\uD83C\uDFEA"}),(0,n.jsx)("div",{style:{fontSize:"".concat(8*K,"px"),fontWeight:"bold",textAlign:"center",color:"white"},children:"Рынок"})]}),(0,n.jsxs)("div",{style:{position:"absolute",left:130*K,bottom:130*K,width:e,height:o,background:"linear-gradient(135deg, #DC143C 0%, #B22222 100%)",borderRadius:"".concat(12*K,"px"),border:"".concat(3*K,"px solid #FF6B35"),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 ".concat(8*K,"px ").concat(25*K,"px rgba(220, 20, 60, 0.6)"),zIndex:3,cursor:"pointer",transition:"all 0.3s ease"},title:"Расходы",children:[(0,n.jsx)("div",{style:{fontSize:"".concat(24*K,"px"),marginBottom:"".concat(4*K,"px")},children:"\uD83D\uDCB8"}),(0,n.jsx)("div",{style:{fontSize:"".concat(8*K,"px"),fontWeight:"bold",textAlign:"center",color:"white"},children:"Расходы"})]})]})})(),(w?I:s).map((e,o)=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"][o%5],i=E[e.id]||0,r=360*i/24,a=168*K;return(0,n.jsx)("div",{style:{position:"absolute",left:J/2+Math.cos((r-90)*Math.PI/180)*a-10+(o%2*20-10),top:J/2+Math.sin((r-90)*Math.PI/180)*a-10+(20*Math.floor(o/2)-10),width:20*K,height:20*K,background:t,borderRadius:"50%",border:"".concat(2*K,"px solid white"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"".concat(10*K,"px"),color:"white",fontWeight:"bold",boxShadow:"0 ".concat(2*K,"px ").concat(8*K,"px rgba(0,0,0,0.3)"),zIndex:4,transition:"all 0.5s ease"},title:"".concat(e.name," (").concat(e.profession||"Предприниматель",") - Позиция: ").concat(i+1),children:o+1},e.id)})]}),(0,n.jsxs)("div",{style:{width:"300px",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(15px)",borderRadius:"20px",border:"2px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)",padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{className:"jsx-e314447532c79391",children:(0,n.jsx)(X,{playerData:l,gamePlayers:s,socket:null,bankBalance:(null==l?void 0:l.money)||0,playerCredit:0,getMaxCredit:()=>1e4,getCashFlow:()=>1200,setShowCreditModal:()=>{},roomId:"demo-room",onBankBalanceChange:()=>{}})}),(0,n.jsxs)("div",{style:{background:"rgba(76, 175, 80, 0.1)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(76, 175, 80, 0.3)"},className:"jsx-e314447532c79391",children:[(0,n.jsxs)("button",{onClick:()=>y(!f),style:{width:"100%",padding:"15px",background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},className:"jsx-e314447532c79391",children:["\uD83D\uDCBC Активы ",f?"▲":"▼"]}),f&&(0,n.jsxs)("div",{style:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},className:"jsx-e314447532c79391",children:[(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("span",{style:{color:"white",fontSize:"14px"},className:"jsx-e314447532c79391",children:"\uD83C\uDFE0 Дом"}),(0,n.jsx)("span",{style:{color:"#4CAF50",fontSize:"14px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:"$150,000"})]}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("span",{style:{color:"white",fontSize:"14px"},className:"jsx-e314447532c79391",children:"\uD83D\uDCC8 Акции"}),(0,n.jsx)("span",{style:{color:"#4CAF50",fontSize:"14px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:"$25,000"})]}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("span",{style:{color:"white",fontSize:"14px"},className:"jsx-e314447532c79391",children:"\uD83D\uDCBC Бизнес"}),(0,n.jsx)("span",{style:{color:"#4CAF50",fontSize:"14px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:"$80,000"})]})]})]}),(0,n.jsxs)("div",{style:{background:"rgba(76, 175, 80, 0.1)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(76, 175, 80, 0.3)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#4CAF50",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",textAlign:"center"},className:"jsx-e314447532c79391",children:"Действия"}),(0,n.jsx)("button",{onClick:v&&Date.now()-F>=1e4?ei:en,disabled:!p||b,style:{width:"100%",padding:"15px",background:p&&!b?v&&Date.now()-F>=1e4?"linear-gradient(45deg, #FF9800, #F57C00)":"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.2)",color:"white",border:"none",borderRadius:"12px",cursor:p&&!b?"pointer":"not-allowed",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},className:"jsx-e314447532c79391",children:b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{animation:"spin 1s linear infinite",fontSize:"20px"},className:"jsx-e314447532c79391",children:"\uD83C\uDFB2"}),"Бросок..."]}):v&&Date.now()-F>=1e4?(0,n.jsxs)(n.Fragment,{children:["⏭️ Переход хода",g&&(0,n.jsxs)("span",{style:{fontSize:"12px"},className:"jsx-e314447532c79391",children:["(",g,")"]})]}):(0,n.jsxs)(n.Fragment,{children:["\uD83C\uDFB2 Бросить кубик",g&&(0,n.jsxs)("span",{style:{fontSize:"12px"},className:"jsx-e314447532c79391",children:["(",g,")"]})]})}),b&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"60px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"10px",marginTop:"10px"},className:"jsx-e314447532c79391",children:(0,n.jsx)("div",{style:{fontSize:"40px",animation:"bounce 0.5s ease-in-out infinite alternate"},className:"jsx-e314447532c79391",children:"\uD83C\uDFB2"})})]}),(0,n.jsxs)("div",{style:{background:"rgba(76, 175, 80, 0.1)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(76, 175, 80, 0.3)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#4CAF50",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",textAlign:"center"},className:"jsx-e314447532c79391",children:"Время хода"}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"15px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.2)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{width:"100%",height:"8px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"4px",overflow:"hidden",marginBottom:"10px"},className:"jsx-e314447532c79391",children:(0,n.jsx)("div",{style:{width:"".concat(j/120*100,"%"),height:"100%",background:j>60?"linear-gradient(90deg, #4CAF50, #8BC34A)":j>20?"linear-gradient(90deg, #FFC107, #FF9800)":"linear-gradient(90deg, #F44336, #E91E63)",borderRadius:"4px",transition:"width 0.3s ease, background 0.3s ease"},className:"jsx-e314447532c79391"})}),(0,n.jsxs)("div",{style:{color:j>60?"rgba(255, 255, 255, 0.8)":j>20?"#FFC107":"#F44336",fontSize:"12px",textAlign:"center",fontWeight:"bold"},className:"jsx-e314447532c79391",children:[Math.floor(j/60),":",(j%60).toString().padStart(2,"0")," / 2:00"]}),j<=20&&(0,n.jsx)("div",{style:{color:"#F44336",fontSize:"10px",textAlign:"center",marginTop:"5px",animation:"blink 1s infinite"},className:"jsx-e314447532c79391",children:"⚠️ ВНИМАНИЕ!"})]})]}),(0,n.jsxs)("div",{style:{background:"rgba(76, 175, 80, 0.1)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(76, 175, 80, 0.3)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#4CAF50",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",textAlign:"center"},className:"jsx-e314447532c79391",children:"Очередность игроков"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},className:"jsx-e314447532c79391",children:(w?I:s).map((e,o)=>{let t=w&&o===R,i=e.id===(null==l?void 0:l.id);return(0,n.jsxs)("div",{style:{background:t?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.1)",padding:"12px",borderRadius:"10px",border:t?"2px solid #4CAF50":"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.3s ease",opacity:w&&!t?.7:1},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{width:"30px",height:"30px",background:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"][o%5],borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"14px"},className:"jsx-e314447532c79391",children:o+1}),(0,n.jsxs)("div",{style:{flex:1},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:e.name}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#ccc"},className:"jsx-e314447532c79391",children:e.profession||"Предприниматель"}),w&&(0,n.jsxs)("div",{style:{fontSize:"10px",color:"#aaa"},className:"jsx-e314447532c79391",children:["Позиция: ",(E[e.id]||0)+1]})]}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#ccc",textAlign:"right"},className:"jsx-e314447532c79391",children:w?t?i?"\uD83C\uDFAF Ваш ход":"⏳ Ходит":"⏸️ Ожидание":e.isReady?"✅ Готов":"⏳ Не готов"})]},e.id)})})]}),(0,n.jsxs)("div",{style:{background:"rgba(76, 175, 80, 0.1)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(76, 175, 80, 0.3)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#4CAF50",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",textAlign:"center"},className:"jsx-e314447532c79391",children:"Текущий игрок"}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"15px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.2)"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{color:"white",fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},className:"jsx-e314447532c79391",children:(null===(o=s[c])||void 0===o?void 0:o.name)||(null==l?void 0:l.name)||"Неизвестно"}),(0,n.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",marginBottom:"5px"},className:"jsx-e314447532c79391",children:["Профессия: ",(null===(t=s[c])||void 0===t?void 0:t.profession)||(null==l?void 0:l.profession)||"Предприниматель"]}),(0,n.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px"},className:"jsx-e314447532c79391",children:["Мечта: ",(null===(i=s[c])||void 0===i?void 0:i.dream)||(null==l?void 0:l.dream)||"Не выбрана"]})]})]})]}),(0,n.jsx)(r(),{id:"e314447532c79391",children:"@-webkit-keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.3}}@-moz-keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.3}}@-o-keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.3}}@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.3}}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes pulse{0%,100%{opacity:.3;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(1.2);transform:scale(1.2)}}@-moz-keyframes pulse{0%,100%{opacity:.3;-moz-transform:scale(1);transform:scale(1)}50%{opacity:1;-moz-transform:scale(1.2);transform:scale(1.2)}}@-o-keyframes pulse{0%,100%{opacity:.3;-o-transform:scale(1);transform:scale(1)}50%{opacity:1;-o-transform:scale(1.2);transform:scale(1.2)}}@keyframes pulse{0%,100%{opacity:.3;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-o-transform:scale(1.2);transform:scale(1.2)}}@-webkit-keyframes diceRoll{0%{-webkit-transform:rotate(0deg)scale(1);transform:rotate(0deg)scale(1)}25%{-webkit-transform:rotate(90deg)scale(1.1);transform:rotate(90deg)scale(1.1)}50%{-webkit-transform:rotate(180deg)scale(.9);transform:rotate(180deg)scale(.9)}75%{-webkit-transform:rotate(270deg)scale(1.1);transform:rotate(270deg)scale(1.1)}100%{-webkit-transform:rotate(360deg)scale(1);transform:rotate(360deg)scale(1)}}@-moz-keyframes diceRoll{0%{-moz-transform:rotate(0deg)scale(1);transform:rotate(0deg)scale(1)}25%{-moz-transform:rotate(90deg)scale(1.1);transform:rotate(90deg)scale(1.1)}50%{-moz-transform:rotate(180deg)scale(.9);transform:rotate(180deg)scale(.9)}75%{-moz-transform:rotate(270deg)scale(1.1);transform:rotate(270deg)scale(1.1)}100%{-moz-transform:rotate(360deg)scale(1);transform:rotate(360deg)scale(1)}}@-o-keyframes diceRoll{0%{-o-transform:rotate(0deg)scale(1);transform:rotate(0deg)scale(1)}25%{-o-transform:rotate(90deg)scale(1.1);transform:rotate(90deg)scale(1.1)}50%{-o-transform:rotate(180deg)scale(.9);transform:rotate(180deg)scale(.9)}75%{-o-transform:rotate(270deg)scale(1.1);transform:rotate(270deg)scale(1.1)}100%{-o-transform:rotate(360deg)scale(1);transform:rotate(360deg)scale(1)}}@keyframes diceRoll{0%{-webkit-transform:rotate(0deg)scale(1);-moz-transform:rotate(0deg)scale(1);-o-transform:rotate(0deg)scale(1);transform:rotate(0deg)scale(1)}25%{-webkit-transform:rotate(90deg)scale(1.1);-moz-transform:rotate(90deg)scale(1.1);-o-transform:rotate(90deg)scale(1.1);transform:rotate(90deg)scale(1.1)}50%{-webkit-transform:rotate(180deg)scale(.9);-moz-transform:rotate(180deg)scale(.9);-o-transform:rotate(180deg)scale(.9);transform:rotate(180deg)scale(.9)}75%{-webkit-transform:rotate(270deg)scale(1.1);-moz-transform:rotate(270deg)scale(1.1);-o-transform:rotate(270deg)scale(1.1);transform:rotate(270deg)scale(1.1)}100%{-webkit-transform:rotate(360deg)scale(1);-moz-transform:rotate(360deg)scale(1);-o-transform:rotate(360deg)scale(1);transform:rotate(360deg)scale(1)}}"}),H&&T&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:et,className:"jsx-e314447532c79391",children:(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",borderRadius:"20px",padding:"30px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",border:"3px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)",position:"relative"},onClick:e=>e.stopPropagation(),className:"jsx-e314447532c79391",children:[(0,n.jsx)("button",{onClick:et,style:{position:"absolute",top:"15px",right:"15px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"30px",height:"30px",color:"white",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-e314447532c79391",children:"\xd7"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("div",{style:{width:"60px",height:"60px",background:T.color,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"30px",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},className:"jsx-e314447532c79391",children:T.icon}),(0,n.jsxs)("div",{className:"jsx-e314447532c79391",children:[(0,n.jsx)("h2",{style:{color:"white",margin:"0 0 5px 0",fontSize:"24px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:T.name}),(0,n.jsxs)("p",{style:{color:"#ccc",margin:"0",fontSize:"16px"},className:"jsx-e314447532c79391",children:["Клетка #",T.id]})]})]}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"20px",borderRadius:"12px",marginBottom:"20px"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#4CAF50",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:"Описание"}),(0,n.jsx)("p",{style:{color:"white",margin:"0",lineHeight:"1.6",fontSize:"14px"},className:"jsx-e314447532c79391",children:T.description?T.description:({start:"Начальная точка игры. Здесь вы начинаете свой путь к финансовой независимости.",opportunity:"Это клетка возможностей! Здесь вы можете получить шанс на дополнительный доход или инвестиции.",business:"Бизнес-клетка. Здесь можно купить или продать бизнес для пассивного дохода.",loss:"Клетка потерь. Будьте готовы к неожиданным тратам и потерям.",charity:"Клетка благотворительности. Поделитесь частью своего дохода с теми, кто в этом нуждается.",payday:"День зарплаты! Получите свой ежемесячный доход и пополните свой баланс.",market:"Рынок недвижимости. Здесь можно купить или продать недвижимость для пассивного дохода.",child:"Рождение ребенка. Это радостное событие, но оно также увеличивает ваши расходы.",expenses:"Клетка расходов. Будьте готовы к неожиданным тратам и обязательным платежам."})[T.type]||"Это специальная клетка игрового поля."})]}),(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"20px",borderRadius:"12px"},className:"jsx-e314447532c79391",children:[(0,n.jsx)("h3",{style:{color:"#FFC107",margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold"},className:"jsx-e314447532c79391",children:"Действия"}),(0,n.jsx)("p",{style:{color:"white",margin:"0",lineHeight:"1.6",fontSize:"14px"},className:"jsx-e314447532c79391",children:(e=>{if("business"===e.type){var o;let t="• Стоимость: $".concat((null===(o=e.cost)||void 0===o?void 0:o.toLocaleString())||"Не указана","\n");return e.income>0?t+="• Доход: $".concat(e.income.toLocaleString(),"/мес\n"):0===e.income&&(t+="• Доход: $0/мес (инвестиция в мечту)\n"),e.special&&(t+="• ".concat(e.special,"\n")),t+="• Купите бизнес для пассивного дохода\n• Продайте нерентабельные активы"}return"loss"===e.type?"• ".concat(e.loss||"Потеря активов","\n• Пересмотрите свою стратегию\n• Найдите способы восстановления"):({start:"• Начните свой путь к финансовой независимости\n• Получите стартовый капитал\n• Планируйте свои инвестиции",opportunity:"• Получите карточку возможностей\n• Выберите подходящую инвестицию\n• Увеличьте свой пассивный доход",charity:"• Пожертвуйте часть дохода\n• Получите благословение\n• Улучшите свою карму",payday:"• Получите зарплату\n• Пополните банковский счет\n• Планируйте следующие расходы",market:"• Изучите рынок недвижимости\n• Купите доходную недвижимость\n• Продайте нерентабельные активы",child:"• Поздравьте с рождением\n• Увеличьте семейные расходы\n• Планируйте будущее ребенка",expenses:"• Оплатите обязательные расходы\n• Пересмотрите свой бюджет\n• Найдите способы экономии"})[e.type]||"• Изучите возможности клетки\n• Примите решение\n• Продолжайте игру"})(T)})]})]})})]})}}}]);