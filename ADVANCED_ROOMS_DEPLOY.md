# üöÄ –î–µ–ø–ª–æ–π Advanced Socket Server —Å MongoDB

## üìã –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–Ω–∞—Ç –≤–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ **MongoDB** —Å Mongoose –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –º–µ—á—Ç—ã** –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ **–ó–∞–ª —Å–ª–∞–≤—ã** —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–Ω–∞—Ç** —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç

## üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB

### –í–∞—Ä–∏–∞–Ω—Ç 1: MongoDB Atlas (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [MongoDB Atlas](https://cloud.mongodb.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä
3. –ü–æ–ª—É—á–∏—Ç–µ connection string
4. –î–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `MONGODB_URI=mongodb+srv://...`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è MongoDB
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB
brew install mongodb-community
# –ò–ª–∏
sudo apt-get install mongodb

# –ó–∞–ø—É—Å–∫
mongod
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render.com

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
- **Name**: `energy888-advanced-socket`
- **Environment**: `Node`
- **Build Command**: `npm install`
- **Start Command**: `node advanced-socket-server.js`

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```
NODE_ENV=production
PORT=4000
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/energy888
```

### 3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∫–æ–¥–æ–º
- Root Directory: `server`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
cd server
npm install
npm start
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
node test-advanced-server.js
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Socket.IO
```javascript
const io = require('socket.io-client');
const socket = io('http://localhost:4000');

socket.on('connect', () => {
  console.log('Connected to server');
  
  // –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
  socket.emit('get-rooms');
  
  // –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
  socket.emit('create-room', {
    name: 'Test Room',
    maxPlayers: 4,
    creatorUsername: 'Test User'
  });
});

socket.on('rooms-list', (rooms) => {
  console.log('Rooms:', rooms);
});
```

## üìä API Endpoints

### REST API
- `GET /` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `GET /health` - –ó–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–µ—Ä–∞
- `GET /stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /rooms` - –°–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
- `GET /hall-of-fame` - –ó–∞–ª —Å–ª–∞–≤—ã

### Socket.IO Events
- `get-rooms` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
- `create-room` - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `join-room` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ
- `leave-room` - –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `player-setup` - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `player-ready` - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞
- `get-room-info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–µ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Game App

–û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Game App:
```
NEXT_PUBLIC_SOCKET_URL=https://money8888-production.up.railway.app
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –≤ Render.com Dashboard
- –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—á–∏—Å—Ç–∫–æ–π –∫–æ–º–Ω–∞—Ç

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ª–∞ —Å–ª–∞–≤—ã

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MONGODB_URI
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ IP –∞–¥—Ä–µ—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ whitelist
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ö–æ–º–Ω–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ MongoDB
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ö–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

### Socket.IO –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–µ–ø–ª–æ–π —Å–µ—Ä–≤–µ—Ä–∞** –Ω–∞ Render.com
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB** Atlas
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Game App** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º API
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API endpoints
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
