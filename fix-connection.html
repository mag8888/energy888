<!DOCTYPE html>
<html>
<head>
    <title>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Energy of Money</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: 50px auto; 
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            opacity: 0.8;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h1>
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Socket.IO —Å–µ—Ä–≤–µ—Ä—É.</p>
        
        <div class="status" id="status">
            <div>–¢–µ–∫—É—â–∏–π Socket URL: <span id="currentUrl">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
            <div>–°—Ç–∞—Ç—É—Å: <span id="connectionStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
        </div>
        
        <button onclick="fixConnection()">üîß –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
        <button onclick="testConnection()">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
        <button onclick="goToGame()">üéÆ –ü–µ—Ä–µ–π—Ç–∏ –∫ –∏–≥—Ä–µ</button>
        
        <div id="logs" style="margin-top: 20px; text-align: left; font-size: 14px;"></div>
    </div>

    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
    <script>
        function log(message) {
            console.log(message);
            const logs = document.getElementById('logs');
            logs.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }
        
        function updateStatus() {
            const currentUrl = localStorage.getItem('SOCKET_URL') || '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
            document.getElementById('currentUrl').textContent = currentUrl;
            
            if (currentUrl.includes('localhost')) {
                document.getElementById('connectionStatus').textContent = '‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL (localhost)';
                document.getElementById('connectionStatus').style.color = '#ff6b6b';
            } else if (currentUrl.includes('energy888-advanced-socket.onrender.com')) {
                document.getElementById('connectionStatus').textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL';
                document.getElementById('connectionStatus').style.color = '#4CAF50';
            } else {
                document.getElementById('connectionStatus').textContent = '‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π URL';
                document.getElementById('connectionStatus').style.color = '#ffa500';
            }
        }
        
        function fixConnection() {
            log('üîß –ù–∞—á–∏–Ω–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...');
            
            // –û—á–∏—â–∞–µ–º localStorage –æ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL
            if (localStorage.getItem('SOCKET_URL') && localStorage.getItem('SOCKET_URL').includes('localhost')) {
                localStorage.removeItem('SOCKET_URL');
                log('‚úÖ –û—á–∏—â–µ–Ω localStorage –æ—Ç localhost URL');
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
            localStorage.setItem('SOCKET_URL', 'https://energy888-advanced-socket.onrender.com');
            log('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Socket URL: ' + localStorage.getItem('SOCKET_URL'));
            
            updateStatus();
            
            setTimeout(() => {
                log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É...');
                window.location.reload();
            }, 2000);
        }
        
        function testConnection() {
            log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...');
            
            const server = 'https://energy888-advanced-socket.onrender.com';
            const socket = io(server, {
                transports: ['websocket', 'polling'],
                timeout: 10000
            });
            
            socket.on('connect', () => {
                log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! ID: ' + socket.id);
                socket.disconnect();
            });
            
            socket.on('connect_error', (error) => {
                log('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + error.message);
            });
            
            socket.on('disconnect', () => {
                log('üîå –û—Ç–∫–ª—é—á–∏–ª–∏—Å—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞');
            });
        }
        
        function goToGame() {
            window.open('https://botenergy-7to1-production.up.railway.app/simple-rooms/', '_blank');
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateStatus();
    </script>
</body>
</html>

